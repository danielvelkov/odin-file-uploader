<% const navigationContent = include('./partials/drive/navigation.ejs', { navigation: { 
                    selectedLayout: layout ?? 'grid',
                    features: features ?? {
                        showSearch: true,
                        showCreateFolder: false,
                        showUploadFile: false,
                        showShareFolder: false,
                    },
                    actions: actions,
                    urls: urls,
                    sharedFolderOwner: locals.sharedFolderOwner ?? null,
                    isSharedFolder: !!locals.sharedFolder,
                    hasBreadcrumbsNavigation: false || searchTerm ,
                    searchResultsCount: locals.getResultsCount() ?? '0',
                    searchTerm
 } }); %>
<% const layoutContent = layout === 'grid'
     ? include('./layouts/search/grid.ejs', { 
                    grid: {
                        enableActions: features.showOptions ,
                        files: results.files ? results.files : [] ,
                        folders: results.folders ? results.folders : [],
                        sharedFolder: locals.sharedFolder,
                        canGoBack: features.canGoBack,
                    }
 })
     : include('./layouts/drive/list-view.ejs', { listView: { 
                        enableActions: features.showOptions ,
                        files: results.files ? results.files : [] ,
                        folders: results.folders ? results.folders : [],
                        sharedFolder: locals.sharedFolder,
                        canGoBack: features.canGoBack,
 } }); %>

<%- include('./layouts/drive-base.ejs', {
    alerts: locals.alerts,
    sidebar: 
        include('./partials/drive/sidebar.ejs', {
            sidebar: {
                features,
                actions,
                sharedFolder: locals.sharedFolder,
                currentUser,
                rootFolders,
            }
        }),
    mainContent: navigationContent + layoutContent,
}) %>