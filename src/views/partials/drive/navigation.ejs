<nav class="bg-violet-200 border border-violet-100 px-5 md:px-10 py-5 rounded flex flex-col gap-5">
    <section class="flex md:flex-wrap flex-wrap-reverse justify-between items-center gap-y-2">
        <% if (navigation.hasBreadcrumbsNavigation) { %>
         
            <div id="breadcrumbs" class="font-semibold">
                <!-- Root dir -->
                <a href="<%= navigation.urls.rootFolderLink %>">
                    <u>
                    <% if (navigation.isSharedFolder) { %>
                        <%= navigation.sharedFolderOwner.email %>
                    <% } else { %>
                        My drive
                    <% } %>
                    </u>
                </a>

                <!-- Folder tree hierarchy -->
                <% if (navigation.urls.rootFolderLink !== navigation.urls.parentFolderLink) { %>
                    <% if (!navigation.isParentPartOfRoot) { %>
                            > ... 
                    <% } %>
                    <a href="<%= navigation.urls.parentFolderLink %>">
                        <span>
                        > 
                        <u>
                            <%- navigation.parentFolderName %>
                        </u>
                        </span>
                    </a>
                <% }  %>

                <!-- Current dir -->
                <% if (navigation.currentFoldername) { %>
                    <span>
                        >
                    <%- navigation.currentFoldername %> 
                    </span>
                <% } %>

            </div>
        <% } %>

        <!-- Search bar -->
        <% if (navigation.features.showSearch) { %>
            <form action="<%= navigation.actions.search %>" method="get" class="flex flex-wrap gap-2 items-center">
                <input <%= navigation.searchTerm ? `value=${navigation.searchTerm}` : '' %>
                 class="grow border rounded-lg px-3 py-2 max-w-sm" required minlength="1" type="search" name="q" placeholder="Search...">
                <button class=" grow rounded-md bg-indigo-600 hover:bg-indigo-500 px-4 py-2 text-sm font-semibold text-white">
                    <i class="fa fa-search"></i>
                </button>
            </form>
        <% } %>
    </section>
    <section class="flex md:flex-wrap flex-wrap justify-between items-center gap-y-3">
        <div class="flex flex-wrap gap-5 items-center gap-y-3">

            <!-- Search results count -->
            <% if (navigation.searchResultsCount || navigation.searchResultsCount === 0) { %>
                <span>
                    <%= navigation.searchResultsCount %>
                    search results
                </span>
            <% } %>

            <!-- Create Folder -->
            <% if (navigation.features.showCreateFolder) { %>
                <div
                class= " text-gray-600  border-gray-400 bg-white  hover:bg-gray-100 text-md rounded-lg border px-2.5 py-1.5 cursor-pointer"
                >
                    <div role="button" id="add-subdir-button" onclick="startEditFromClick('subdir');" class="flex items-center justify-center gap-3">
                        <i class="fa fa fa-plus"></i>
                        <span class="font-semibold">New Folder</span>
                    </div>
                    <form id="add-subdir-form" class="max-w-full flex flex-wrap items-center gap-2" hidden action="<%= navigation.actions.createFolder %>" method="post">
                        <label class="sr-only" for="add-subdir-name">Folder name:</label>
                        <input id="add-subdir-name" placeholder="New Folder Name..." type="text" maxlength="20" name="folder" class="shrink flex-1 max-w-[100%] border rounded-sm border-gray-400" >
                        <div class="flex-1 flex gap-3">

                        <button type="submit" aria-label="Confirm button"
                        class="flex-1/2 border border-violet-400 rounded-sm p-1 hover:bg-green-500" >
                            <i class="fa fa-solid fa-check"></i>
                        </button>
                        <button type="button" aria-label="Cancel button" onclick="cancelEditSelectedFromClick('subdir')"
                        id="close-subdir-form-button" class="flex-1/2 border border-violet-400 rounded-sm p-1 hover:bg-red-500">
                            <i class="fa fa-solid fa-times"></i>
                        </button>
                        </div>
                    </form>
                </div>
            <% } %>

            <!-- Upload File -->
            <% if (navigation.features.showUploadFile) { %>
                <div role="button" onclick="document.getElementById('fileInput').click();" class= "text-white bg-indigo-600 hover:bg-indigo-500 text-md rounded-lg border px-2.5 py-1.5 cursor-pointer">
                    <div class=" flex items-center justify-center gap-3">
                        <i class="fa fa-upload "></i>
                        <span class="font-semibold ">Upload file</span>
                    </div>
                    <form id="fileUploadForm" action="<%= navigation.actions.uploadFile %>" method="post" enctype="multipart/form-data">
                        <input id="fileInput" name="file" type="file" hidden onchange="this.closest('form').submit()">
                    </form>
                </div>
            <% } %>

            <!-- Share Folder -->
            <% if (navigation.features.showShareFolder) { %>
                <button
                    onclick="document.getElementById('share-folder-dialog').showModal();"
                    class="rounded-md bg-gray-950/10 px-2.5 py-1.5 text-md font-semibold  hover:bg-gray-400 flex items-center justify-center gap-3 cursor-pointer"
                >
                    <i class="fa fa-share-alt"></i>
                    <span>
                        Share Folder
                    </span>
                </button>

                <!-- Share Folder Dialog -->
                <%- include('../../components/dialog.ejs', {
                    dialog:{
                    id: 'share-folder-dialog',
                    title: 'Share folder',
                    isOpen: false,
                    content: include('../../partials/drive/share-folder-form.ejs', {
                        dialogFormAction: navigation.actions.shareFolder,
                        dialogId: 'share-folder-dialog',
                        }),
                    showCloseButton: true,
                    }
                }) %>
            <% } %>
        </div>

        <!-- Layout Options -->
        <div class="flex gap-3">
            <a href="<%= navigation.actions.changeToGrid %>" title="Grid Layout" >
                <button aria-label="Change Layout to Grid" class="p-1 px-2
                    <%= navigation.selectedLayout === 'grid' ? 'bg-indigo-500' : 'bg-violet-300 hover:bg-violet-400' %>
                    ">
                    <i class="fa fa-th"></i>
                </button>
            </a>
            <a href="<%= navigation.actions.changeToList %>" title="Listview Layout">
                <button aria-label="Change Layout to Listview" class="p-1 px-2
                    <%= navigation.selectedLayout === 'list' ? 'bg-indigo-500' : 'bg-violet-300 hover:bg-violet-400' %>
                    ">
                    <i class="fa fa-list"></i>
                </button>
            </a>
        </div>
    </section>
</nav>

